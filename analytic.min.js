var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(a){return a.raw=a};$jscomp.createTemplateTagFirstArgWithRaw=function(a,b){a.raw=b;return a};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};
$jscomp.arrayFromIterator=function(a){for(var b,c=[];!(b=a.next()).done;)c.push(b.value);return c};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(a,b){var c=$jscomp.propertyToPolyfillSymbol[b];if(null==c)return a[b];c=a[c];return void 0!==c?c:a[b]};
$jscomp.polyfill=function(a,b,c,d){b&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,b,c,d):$jscomp.polyfillUnisolated(a,b,c,d))};$jscomp.polyfillUnisolated=function(a,b,c,d){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))return;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})};
$jscomp.polyfillIsolated=function(a,b,c,d){var e=a.split(".");a=1===e.length;d=e[0];d=!a&&d in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var g=0;g<e.length-1;g++){var h=e[g];if(!(h in d))return;d=d[h]}e=e[e.length-1];c=$jscomp.IS_SYMBOL_NATIVE&&"es6"===c?d[e]:null;b=b(c);null!=b&&(a?$jscomp.defineProperty($jscomp.polyfills,e,{configurable:!0,writable:!0,value:b}):b!==c&&($jscomp.propertyToPolyfillSymbol[e]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(e):$jscomp.POLYFILL_PREFIX+e,e=
$jscomp.propertyToPolyfillSymbol[e],$jscomp.defineProperty(d,e,{configurable:!0,writable:!0,value:b})))};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(a){if(a)return a;var b=function(e,g){this.$jscomp$symbol$id_=e;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:g})};b.prototype.toString=function(){return this.$jscomp$symbol$id_};var c=0,d=function(e){if(this instanceof d)throw new TypeError("Symbol is not a constructor");return new b("jscomp_symbol_"+(e||"")+"_"+c++,e)};return d},"es6","es3");
$jscomp.polyfill("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),c=0;c<b.length;c++){var d=$jscomp.global[b[c]];"function"===typeof d&&"function"!=typeof d.prototype[a]&&$jscomp.defineProperty(d.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return a},"es6",
"es3");$jscomp.iteratorPrototype=function(a){a={next:a};a[Symbol.iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,b){a instanceof String&&(a+="");var c=0,d=!1,e={next:function(){if(!d&&c<a.length){var g=c++;return{value:b(g,a[g]),done:!1}}d=!0;return{done:!0,value:void 0}}};e[Symbol.iterator]=function(){return e};return e};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(b){return b})}},"es6","es3");
var establishedAt=new Date($("#established_at").attr("content"));function siteEstablishedDays(){var a=new Date;a=new Date(a.getFullYear(),a.getMonth(),a.getDate());return Math.floor((a-establishedAt)/864E5+1)}function site3yearAgoDays(){var a=new Date,b=new Date(a.getFullYear(),a.getMonth(),a.getDate());a=new Date(a.getFullYear()-3,a.getMonth(),a.getDate());return Math.floor((b-a)/864E5+1)}$("#established-at").countdown(establishedAt,{elapse:!0}).on("update.countdown",function(a){a.elapsed&&$(this).html(a.strftime('<div class="ui label"><i class="rocket icon"></i>\u5df2\u4e0a\u7ebf</div><div class="ui label">%D<div class="detail">\u5929</div></div><div class="ui label">%-H<div class="detail">\u5c0f\u65f6</div></div><div class="ui label">%-M<div class="detail">\u5206</div></div><div class="ui label">%-S<div class="detail">\u79d2</div></div>'))});
var countUpOptions={useEasing:!0,useGrouping:!0,separator:",",decimal:".",prefix:"",suffix:""},yesterdayVisitorsCountUp=new CountUp("yesterday-visitors-stat",0,0,0,2.5,countUpOptions),yesterdayVisitsCountUp=new CountUp("yesterday-visits-stat",0,0,0,2.5,countUpOptions),yesterdayActionsCountUp=new CountUp("yesterday-actions-stat",0,0,0,2.5,countUpOptions),totalActionsCountUp=new CountUp("total-actions",0,0,0,2.5,countUpOptions),liveVisitorsCountUp=new CountUp("live-visitors-stat",0,0,0,2.5,countUpOptions),
todayVisitorsCountUp=new CountUp("today-visitors-stat",0,0,0,2.5,countUpOptions),todayVisitsCountUp=new CountUp("today-visits-stat",0,0,0,2.5,countUpOptions),todayActionsCountUp=new CountUp("today-actions-stat",0,0,0,2.5,countUpOptions);$.getJSON(analyticsAPI.url,{module:"API",method:"VisitsSummary.getUniqueVisitors",idSite:analyticsAPI.id,period:"day",date:"yesterday",format:"JSON",token_auth:analyticsAPI.token},function(a){yesterdayVisitorsCountUp.update(a.value)});
$.getJSON(analyticsAPI.url,{module:"API",method:"VisitsSummary.getVisits",idSite:analyticsAPI.id,period:"day",date:"yesterday",format:"JSON",token_auth:analyticsAPI.token},function(a){yesterdayVisitsCountUp.update(a.value)});$.getJSON(analyticsAPI.url,{module:"API",method:"VisitsSummary.getActions",idSite:analyticsAPI.id,period:"day",date:"yesterday",format:"JSON",token_auth:analyticsAPI.token},function(a){yesterdayActionsCountUp.update(a.value)});
function updateVisit(){$.getJSON(analyticsAPI.url,{module:"API",method:"VisitsSummary.getActions",idSite:analyticsAPI.id,period:"range",date:"last"+siteEstablishedDays(),format:"JSON",token_auth:analyticsAPI.token},function(a){totalActionsCountUp.update(a.value)});$.getJSON(analyticsAPI.url,{module:"API",method:"Live.getCounters",idSite:analyticsAPI.id,lastMinutes:"30",format:"JSON",token_auth:analyticsAPI.token},function(a){liveVisitorsCountUp.update(a[0].visitors)});$.getJSON(analyticsAPI.url,{module:"API",
method:"VisitsSummary.getUniqueVisitors",idSite:analyticsAPI.id,period:"day",date:"today",format:"JSON",token_auth:analyticsAPI.token},function(a){todayVisitorsCountUp.update(a.value)});$.getJSON(analyticsAPI.url,{module:"API",method:"VisitsSummary.getVisits",idSite:analyticsAPI.id,period:"day",date:"today",format:"JSON",token_auth:analyticsAPI.token},function(a){todayVisitsCountUp.update(a.value)});$.getJSON(analyticsAPI.url,{module:"API",method:"VisitsSummary.getActions",idSite:analyticsAPI.id,
period:"day",date:"today",format:"JSON",token_auth:analyticsAPI.token},function(a){todayActionsCountUp.update(a.value)})}updateVisit();setInterval(function(){document.hidden||updateVisit()},6E4);var visitSummaryChart=echarts.init(document.getElementById("visit-summary"),"light");
visitSummaryChart.setOption({baseOption:{title:{text:"\u8bbf\u5ba2\u6570\u636e\u603b\u89c8\uff08\u8fc7\u53bb90\u5929\uff09",left:"center"},legend:{data:["\u8bbf\u5ba2\u6570","\u8bbf\u95ee\u6b21\u6570","\u6d4f\u89c8\u6b21\u6570"],right:"center",top:30},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},toolbox:{showTitle:!1,feature:{restore:{},magicType:{type:["bar","line"]},dataView:{readOnly:!0},saveAsImage:{excludeComponents:["toolbox","dataZoom"]}}},dataZoom:[{type:"slider",show:!0,realtime:!0,
xAxisIndex:[0],start:50,end:100}],xAxis:{type:"category",data:[]},yAxis:{type:"value"},series:[{name:"\u8bbf\u5ba2\u6570",type:"bar",data:[],animationDelay:function(a){return 10*a}},{name:"\u8bbf\u95ee\u6b21\u6570",type:"bar",data:[],animationDelay:function(a){return 10*a+100}},{name:"\u6d4f\u89c8\u6b21\u6570",type:"bar",data:[],animationDelay:function(a){return 10*a+200}}],animationEasing:"elasticOut",animationDelayUpdate:function(a){return 5*a}},media:[{query:{maxWidth:767},option:{legend:{orient:"vertical"},
grid:{top:110,left:40,right:10},toolbox:{show:!1}}}]});visitSummaryChart.showLoading();
function updateVisitSummaryChart(){$.getJSON(analyticsAPI.url,{module:"API",method:"VisitsSummary.getUniqueVisitors",idSite:analyticsAPI.id,period:"day",date:"last90",format:"JSON",token_auth:analyticsAPI.token},function(a){var b=[],c=[],d;for(d in a)b.push(d),c.push(a[d]);visitSummaryChart.setOption({xAxis:{data:b},series:[{name:"\u8bbf\u5ba2\u6570",data:c}]})});$.getJSON(analyticsAPI.url,{module:"API",method:"VisitsSummary.getVisits",idSite:analyticsAPI.id,period:"day",date:"last90",format:"JSON",
token_auth:analyticsAPI.token},function(a){var b=[],c;for(c in a)b.push(a[c]);visitSummaryChart.setOption({series:[{name:"\u8bbf\u95ee\u6b21\u6570",data:b}]})});$.getJSON(analyticsAPI.url,{module:"API",method:"VisitsSummary.getActions",idSite:analyticsAPI.id,period:"day",date:"last90",format:"JSON",token_auth:analyticsAPI.token},function(a){var b=[],c;for(c in a)b.push(a[c]);visitSummaryChart.setOption({series:[{name:"\u6d4f\u89c8\u6b21\u6570",data:b}]})})}updateVisitSummaryChart();visitSummaryChart.hideLoading();
setInterval(function(){document.hidden||updateVisitSummaryChart()},6E4);var visitHourlyChart=echarts.init(document.getElementById("visit-hourly"),"light");
visitHourlyChart.setOption({baseOption:{title:{text:"\u8bbf\u5ba2\u6570\u636e\uff087\u00d724\u5c0f\u65f6\uff09",left:"center"},legend:{data:["\u8bbf\u5ba2\u6570","\u8bbf\u95ee\u6b21\u6570","\u6d4f\u89c8\u6b21\u6570"],selectedMode:"single",right:"center",top:30},tooltip:{position:"top",formatter:function(a){return a.value[1]+" "+a.value[0]+"<br>"+a.seriesName+": "+a.value[2]}},toolbox:{showTitle:!1,feature:{restore:{},saveAsImage:{excludeComponents:["toolbox"]}}},xAxis:{type:"category",data:"00 01 02 03 04 05 06 07 08 09 10 11 12 13 14 15 16 17 18 19 20 21 22 23".split(" "),
boundaryGap:!1,splitLine:{show:!0,lineStyle:{type:"dashed"}}},yAxis:{type:"category",data:[],splitLine:{show:!0},axisLine:{show:!1}},series:[{name:"\u8bbf\u5ba2\u6570",type:"scatter",data:[],animationDelay:function(a){return 10*a+100}},{name:"\u8bbf\u95ee\u6b21\u6570",type:"scatter",data:[],animationDelay:function(a){return 10*a+100}},{name:"\u6d4f\u89c8\u6b21\u6570",type:"scatter",data:[],animationDelay:function(a){return 10*a+100}}]},media:[{query:{maxWidth:767},option:{legend:{orient:"vertical"},
grid:{top:110,left:70,right:10},toolbox:{show:!1}}}]});visitHourlyChart.showLoading();function normalizeSymbolSize(a,b,c){if(0===a)return 0;if(c){c=20;var d=5}else c=40,d=10;var e=Math.max.apply(Math,$jscomp.arrayFromIterable(b.map(function(g){return g[2]})));b=Math.min.apply(Math,$jscomp.arrayFromIterable(b.map(function(g){return g[2]})));return e===b?(c-d)/2+d:(a-b)/(e-b)*(c-d)+d}
function updateVisitHourlyChart(){$.getJSON(analyticsAPI.url,{module:"API",method:"VisitTime.getVisitInformationPerServerTime",idSite:analyticsAPI.id,period:"day",date:"last7",format:"JSON",token_auth:analyticsAPI.token},function(a){var b=[],c=[],d=[],e=[],g;for(g in a){b.unshift(g);for(var h in a[g])c.push([a[g][h].label,g,a[g][h].nb_uniq_visitors]),d.push([a[g][h].label,g,a[g][h].nb_visits]),e.push([a[g][h].label,g,a[g][h].nb_actions])}visitHourlyChart.setOption({baseOption:{yAxis:{data:b},series:[{name:"\u8bbf\u5ba2\u6570",
data:c,symbolSize:function(f){return normalizeSymbolSize(f[2],c,!1)}},{name:"\u8bbf\u95ee\u6b21\u6570",data:d,symbolSize:function(f){return normalizeSymbolSize(f[2],d,!1)}},{name:"\u6d4f\u89c8\u6b21\u6570",data:e,symbolSize:function(f){return normalizeSymbolSize(f[2],e,!1)}}]},media:[{query:{maxWidth:767},option:{series:[{name:"\u8bbf\u5ba2\u6570",data:c,symbolSize:function(f){return normalizeSymbolSize(f[2],c,!0)}},{name:"\u8bbf\u95ee\u6b21\u6570",data:d,symbolSize:function(f){return normalizeSymbolSize(f[2],
d,!0)}},{name:"\u6d4f\u89c8\u6b21\u6570",data:e,symbolSize:function(f){return normalizeSymbolSize(f[2],e,!0)}}]}}]})})}updateVisitHourlyChart();visitHourlyChart.hideLoading();setInterval(function(){document.hidden||updateVisitHourlyChart()},6E4);var visitMapChart=echarts.init(document.getElementById("visit-map"),"light");
visitMapChart.setOption({baseOption:{title:{text:"\u672c\u6708\u8bbf\u5ba2\u6765\u6e90",left:"center"},legend:{data:["\u8bbf\u5ba2\u6570","\u8bbf\u95ee\u6b21\u6570","\u6d4f\u89c8\u6b21\u6570"],selectedMode:"single",right:"center",top:30},tooltip:{trigger:"item",formatter:function(a){var b=a.value;b||(b=0);return a.seriesName+": "+b}},toolbox:{showTitle:!1,feature:{restore:{},saveAsImage:{excludeComponents:["toolbox"]}}},visualMap:{min:0,max:5E3,text:["High","Low"],calculable:!0},series:[{name:"\u8bbf\u5ba2\u6570",
type:"map",mapType:"world",showLegendSymbol:!1,itemStyle:{emphasis:{label:{show:!0}}},data:[]},{name:"\u8bbf\u95ee\u6b21\u6570",type:"map",mapType:"world",showLegendSymbol:!1,itemStyle:{emphasis:{label:{show:!0}}},data:[]},{name:"\u6d4f\u89c8\u6b21\u6570",type:"map",mapType:"world",showLegendSymbol:!1,itemStyle:{emphasis:{label:{show:!0}}},data:[]}]},media:[{query:{maxWidth:767},option:{legend:{orient:"vertical"},toolbox:{show:!1}}}]});
function updateVisitMapChart(){$.getJSON(analyticsAPI.url,{module:"API",method:"UserCountry.getCountry",idSite:analyticsAPI.id,period:"month",date:"today",format:"JSON",token_auth:analyticsAPI.token},function(a){var b=[],c=[],d=[],e=0,g=0,h=0,f;for(f in a)"China"==a[f].label?(e+=a[f].sum_daily_nb_uniq_visitors,g+=a[f].nb_visits,h+=a[f].nb_actions):"Hong Kong SAR China"==a[f].label?(e+=a[f].sum_daily_nb_uniq_visitors,g+=a[f].nb_visits,h+=a[f].nb_actions):"Taiwan"==a[f].label?(e+=a[f].sum_daily_nb_uniq_visitors,
g+=a[f].nb_visits,h+=a[f].nb_actions):"Unknown"==a[f].label?(e+=a[f].sum_daily_nb_uniq_visitors,g+=a[f].nb_visits,h+=a[f].nb_actions):(b.push({name:a[f].label,value:a[f].sum_daily_nb_uniq_visitors}),c.push({name:a[f].label,value:a[f].nb_visits}),d.push({name:a[f].label,value:a[f].nb_actions}));b.push({name:"China",value:e});c.push({name:"China",value:g});d.push({name:"China",value:h});visitMapChart.setOption({series:[{name:"\u8bbf\u5ba2\u6570",data:b},{name:"\u8bbf\u95ee\u6b21\u6570",data:c},{name:"\u6d4f\u89c8\u6b21\u6570",
data:d}]})})}updateVisitMapChart();setInterval(function(){document.hidden||updateVisitMapChart()},6E4);var visitCalendarChart=echarts.init(document.getElementById("visit-calendar"),"light"),firstYear=establishedAt.getFullYear(),newdate=new Date,maxYear=newdate.getFullYear(),yearNum=3;calendarList=Array(yearNum);calendarList[0]={range:maxYear-2,right:5};calendarList[1]={range:maxYear-1,right:5,top:240};calendarList[2]={range:maxYear,right:5,top:420};
visitCalendarChart.setOption({baseOption:{title:{text:"\u5386\u5e74\u6d4f\u89c8\u6570\u636e",left:"center"},tooltip:{position:"top",formatter:function(a){return echarts.format.formatTime("yyyy-MM-dd",a.data[0])+" \u6d4f\u89c8\u6b21\u6570\uff1a"+a.data[1]}},toolbox:{showTitle:!1,feature:{restore:{},saveAsImage:{excludeComponents:["toolbox"]}}},visualMap:{min:50,max:1E3,calculable:!0,orient:"horizontal",top:"top",left:0},calendar:calendarList,series:[{type:"heatmap",coordinateSystem:"calendar",calendarIndex:0,
data:[]},{type:"heatmap",coordinateSystem:"calendar",calendarIndex:1,data:[]},{type:"heatmap",coordinateSystem:"calendar",calendarIndex:2,data:[]}]},media:[{query:{maxWidth:767},option:{toolbox:{show:!1},visualMap:{orient:"vertical"},calendar:[{orient:"vertical",left:"center",top:90},{orient:"vertical",left:"center",top:1220},{orient:"vertical",left:"center",top:2350}]}}]});
function updateVisitCalendarChart(){$.getJSON(analyticsAPI.url,{module:"API",method:"VisitsSummary.getActions",idSite:analyticsAPI.id,period:"day",date:"last"+site3yearAgoDays(),format:"JSON",token_auth:analyticsAPI.token},function(a){var b=Object.keys(a),c=b=Number(b[b.length-1].slice(0,4))-2,d=[{calendarIndex:c-b,data:[]}],e;for(e in a){year=Number(e.slice(0,4));if(year>c&&year<=maxYear)c=year,d.push({calendarIndex:c-b,data:[]});else if(year<b||year>maxYear)continue;d[c-firstYear].data.push([echarts.format.formatTime("yyyy-MM-dd",
e),a[e]])}visitCalendarChart.setOption({series:d})})}updateVisitCalendarChart();setInterval(function(){document.hidden||updateVisitCalendarChart()},6E4);
